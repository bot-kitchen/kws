{{define "head"}}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{.Title}} - {{.AppName}}</title>
<link rel="icon" type="image/svg+xml" href="/static/icons/favicon.svg">

<!-- Apply theme immediately to prevent flash -->
<script>
    (function () {
        const savedTheme = localStorage.getItem('theme');
        const isDark = savedTheme ? savedTheme === 'dark' : window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (isDark) {
            document.documentElement.classList.add('dark');
        }
    })();
</script>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet">

<!-- Compiled CSS (includes Tailwind + custom styles) -->
<link rel="stylesheet" href="/static/css/styles.css">
<script src="/static/js/htmx.min.js"></script>
<script src="/static/js/theme.js"></script>
<script src="/static/js/alpine.min.js" defer></script>
<script src="/static/js/app.js"></script>

<!-- SortableJS for drag-and-drop -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

<!-- Tom Select for searchable selects -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css">
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>

<!-- D3.js for telemetry charts -->
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>

<!-- GridStack.js v12.3.0 for dashboard layout -->
<link href="https://cdn.jsdelivr.net/npm/gridstack@12.3.0/dist/gridstack.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/gridstack@12.3.0/dist/gridstack-extra.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/gridstack@12.3.0/dist/gridstack-all.js"></script>

<!-- Shared Recipe Action Configuration -->
<script src="/static/js/recipe-actions.js"></script>

<!-- Recipe Steps Management -->
<script src="/static/js/recipe-steps.js"></script>

{{end}}
